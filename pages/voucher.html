<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Fontenay</title>

    <!-- Bootstrap Core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <!-- MetisMenu CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/metisMenu/2.7.9/metisMenu.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <div id="wrapper" style="max-width: 1100px">
        <div id="page-wrapper" class="printPage">
                <div class="row voucherHeader">
                    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <h3>LOGO</h3>
                    </div>
                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 ">
                        <h2>Voucher de servicios</h2>
                        <h5>Empresa de viajes y turismo leg. N°16.426</h5>
                    </div>
                    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <h4>FONTENAY TOURS</h4>
                        <h3 class="voucher-id">N°-</h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
                        <div class="form-group lessSpace">
                            <label>Pasajeros/Pax:</label>
                            <p class="clientnamelabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Pasaporte/ID/Passport:</label>
                            <p class="passportlabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Hotel:</label>
                            <p class="hotellabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Dirección:</label>
                            <p class="addresslabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Email:</label>
                            <p class="emaillabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Servicio:</label>
                            <p class="productlabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Proveedor:</label>
                            <p class="providerlabel form-control-static inlineBlock"></p>
                        </div>
                    </div>
                    <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
                        <div class="form-group lessSpace">
                            <label>Habitación:</label>
                            <p class="roomlabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Adultos/Adults:</label>
                            <p class="adultslabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Niños/Children:</label>
                            <p class="childrenlabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Bebés/Babies:</label>
                            <p class="babieslabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Pick-up:</label>
                            <p class="transferlabel form-control-static inlineBlock"></p>
                        </div>
                        <div class="form-group lessSpace">
                            <label>Fecha/Date:</label>
                            <p class="datelabel form-control-static inlineBlock"></p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <p class="voucherText">
                        Emergency phones: +(54) 11 6838 8892 / +(54) 11 4893 0771
                    </p>
                    <p class="voucherText">
                        www.fontenaytours.com ------ FB: /fontenaytours ------ EMAIL: fontenaytours@gmail.com
                    </p>
                </div>
                <div class="row">
                    <p class="voucherText">
                        ES: Condiciones: Todos los importes pagados antes de la confirmación definitiva de los servicios son percibidos en concepto de reserva y no tendrán devolución si se cancelan dentro de las 24Hrs. Previas al inicio de la prestación del servicio contratado. Los reclamos deberán presentarse dentro de las 24 Hrs. Posteriores de la fecha de finalización del tour justificados a través de los comprobantes respectivos. Pasado este plazo no será atendido reclamo alguno Fontenay Tours declara expresamente que actúa en carácter de intermediaria en la reserva y contratación de los distintos servicios vinculados o incluidos en el respectivo tour o reservación de servicios: hoteles, restaurantes, medios de transporte, u otros operadores, declinando toda responsabilidad por deficiencia de cualquiera de los servicios, como así también por los daños y perjuicios que pudieran sufrir los pasajeros en las personas o en los bienes cualquiera fuese la causa que los origine, ya que esta responsabilidad es exclusiva de la prestataria del servicio Fontenay Tours no se responsabiliza por las alteraciones en los horarios, postergaciones, y/o cancelaciones, comodidades, equipos utilizados, etc. De las empresas transportadoras, estando condicionados a las disposiciones de las mismas, tampoco por los gastos y/o perdidas que estas situaciones provocaren.
                    </p>
                </div>
                <div class="row">
                    <p class="voucherText">
                        PR: Condições de contratação: Todos os valores pagos antes da confirmação definitiva dos serviços são percebidos como reserva e não será reembolsado se cancelado dentro do prazo de 24 horas antes do inicio do serviço contratado. As reclamações devem ser apresentadas no prazo de 24 horas após a data final do passeio justificado através dos respectivos comprovantes  e recibos. Após este prazo não será recebida qualquer reivindicação. Fontenay Tours declara expressamente que atua no caráter de intermediaria na reserva e na contratação dos diferentes serviços envolvidos ou que constam da respectiva excursão ou serviço de reserva: hotéis, restaurantes, transportes, ou outras operadoras, declinando qualquer responsabilidade por deficiência de qualquer um dos serviços, bem como por danos que possam sofrer passageiros, pessoas ou bens, independentemente da causa que se origina, pois esta e a única responsabilidade do mutuário serviço. Fontenay Tours, não e responsável por alterações nos horários, atrasos e/ou cancelamentos, instalações, equipamentos utilizados, etc. em empresas de transporte, estando condicionadas as disposições dos mesmos, nem as despesas e / ou prejuízos que provocarem estas situações.
                    </p>
                </div>
                <div class="row">
                    <p class="voucherText">
                        EN: Terms and conditions: all amounts paid before the final confirmation of the services are perceived as a reservation and will not be refunded if you cancel within 24 hours before the start of the contracted services. Laims must be submitted within 24 hours after the final date of the hours, supported by the respective voucher. After the period no claimwhatsover will be allowed. Fontenay Tours, expressly declares that acts as an intermediary in the reservation or contracting os various services associated with or included in the respective tour or reservation of services: hotels, restaurants, transportation, or other providers, not assuming any responsibility form deficiency of any of the services as well as for damages to be offered by passenger con people or property whatever the underlying causes, as this exclusive responsibility of the provider of the services. Fontenay Tours is not responsible forma changes un schedules, postponement and cancellations, of the transportation companies, beig conditions by the provisions there of not forma expenses and/or losses that these situations may provoke.
                    </p>
                </div>
            </div>
    </div>
    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Metis Menu Plugin JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/metisMenu/2.7.9/metisMenu.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/fontenay.js"></script>

    <script>
        $(document).ready(function() {
            var myParam = location.search.split("saleid=")[1].split("&")[0];
            _loadSale(myParam);
        });

        function _loadSale(id) {
            var salePromise = new Promise(
                function (resolve, reject) {
                    _getSale(resolve, reject, id);
                }
            );

            var load = function(salePromise) {
                salePromise
                    .then(function (result) {
                        _fillInformation(result);
                    })
                    .catch(function (error) {
                        console.log(error.message);
                    });
            };
            load(salePromise);
        }

        function  _fillInformation(sale) {
            var numberOfVouchers = sale.products.length;
            if(1 === numberOfVouchers) {
                _fillProductData(sale.products[0], $(".printPage"));
            } else {
                for(var i = 0; i < numberOfVouchers ; i++) {
                    var el = sale.products[i];
                    var voucherIDClass = "voucher-" + el.sold_product_id;
                    var previousVoucherIDClass = "voucher-" + (el.sold_product_id - 1);
                    var newVoucher;
                    if(i === 0) {
                        newVoucher  = $(".printPage").addClass(voucherIDClass);
                    } else {
                        newVoucher = $("."+previousVoucherIDClass).clone().addClass(voucherIDClass).removeClass(previousVoucherIDClass);
                    }
                    $("#wrapper").append(newVoucher);
                    _fillProductData(el, $("." + voucherIDClass));
                }
            }
            _fillClient(sale.client);


            var myParams = location.search.split("download=");
            if(myParams[1] !== undefined && myParams[1] === "true") {
                _downloadPDF(sale.sale_id)
            }
        }

        function  _fillClient(client) {
            $(".clientnamelabel").text(client.name);
            $(".passportlabel").text(client.passport_number);
            $(".nationalitylabel").text(client.nationality);
            $(".hotellabel").text(client.hotel);
            $(".addresslabel").text(client.address);
            $(".roomlabel").text(client.room_number);
            $(".phonelabel").text(client.contact_number);
            $(".emaillabel").text(client.email);
        }

        function _fillProductData(prod, container) {
            var prodDate = _getFormatDateDDMMYYYYHHMM(new Date(prod.date));
            var transferLabel = prod.transfer? "SÍ  (" + prodDate.split(" ")[1] + " hs.)" : "NO";
            container.find(".voucher-id").text("N°- F000000" + prod.sold_product_id);
            container.find(".productlabel").text(prod.product.name);
            container.find(".providerlabel").text(prod.product.provider.name);
            container.find(".adultslabel").text(prod.adults);
            container.find(".childrenlabel").text(prod.children);
            container.find(".babieslabel").text(prod.babies);
            container.find(".transferlabel").text(transferLabel);
            container.find(".datelabel").text(prodDate.split(" ")[0]);
        }


        function _downloadPDF(saleid) {
            var w = 1100;
            $("#wrapper").width(w);
            var h = document.getElementById("wrapper").offsetHeight;
            html2canvas(document.getElementById("wrapper"), {
                dpi: 300, // Set to 300 DPI
                scale: 3, // Adjusts your resolution
                onrendered: function (canvas) {
                    var img = canvas.toDataURL("image/jpeg", 1);
                    var doc = new jsPDF('P', 'px', [h, 850]);
                    doc.addImage(img, 'JPEG', 0, 0);
                    doc.save('VOUCHERS-VENTA-N-' + saleid + '.pdf');
                }
            });
        }
    </script>
</body>

</html>
